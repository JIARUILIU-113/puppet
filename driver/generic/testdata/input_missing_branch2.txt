# token round 1 -- just the master, the other are checking what is the highest ID
A
I,1,00,00010203,00010203,00000001
Z
# token round 2 -- all node present take an id
A
M,1
I,2,01,00010203,00010203,00000002
I,3,01,00010203,00010203,00000003
Z
# token round 3 -- start measuring
A
M,1
M,2,0001,0002,0003
M,3,0001,0003,0003
Z
# token round 4
A
M,1
M,2,0001,0002,0004
M,3,0001,0004,0004
Z
# token round 5 -- splitter plugged, everybody wait for ids
A
M,1
M,2,0001,0002,0005
M,3,0001,0005,0005
Z
# token round 6 -- new nodes announce themselves
A
M,1
M,2,0001,0002,0006
M,3,0001,0006,0006
I,4,08,00010203,00010203,00000004
I,4,09
I,4,0A
I,5,01,00010203,00010203,00000005
I,6,02,00010203,00010203,00000006
I,4,0B
I,4,0C
I,4,0D
I,7,03,00010203,00010203,00000007
I,4,0E
I,4,0F
Z
# token round 7 -- everybody starts measuring
A
M,1
M,2,0001,0002,0007
M,3,0001,0007,0007
M,4,08
M,4,09
M,4,0A
M,5,0007,0007,0007
M,6,0077
M,4,0B
M,4,0C
M,4,0D
M,7,0777
M,4,0E
M,4,0F
Z
# token round 8 -- everybody keeps measuring
A
M,1
M,2,0001,0002,0008
M,3,0001,0008,0008
M,4,08,
M,4,09,
M,4,0A
M,5,0008,0008,0008
M,6,0088
M,4,0B
M,4,0C
M,4,0D
M,7,0888
M,4,0E
M,4,0F
Z
# token round 9 -- Node 6 gets unplugged, and replugged (super fast) after node 7
A
M,1
M,2,0001,0002,0009
M,3,0001,0009,0009
M,4,08,
M,4,09,
M,4,0A
M,5,0009,0009,0009
M,4,0B
M,4,0C
M,4,0D
M,7,0999
M,4,0E
M,4,0F
Z
# token round A -- new node advertise itself and a 4 way splitter is plugged
A
M,1
M,2,0001,0002,000A
M,3,0001,000A,000A
M,4,08,
M,4,09,
M,4,0A
M,5,000A,000A,000A
M,4,0B
M,4,0C
M,4,0D
M,7,0AAA
I,8,02,00010203,00010203,00000006
M,4,0E
M,4,0F
Z
# token round B -- everybody measures
A
M,1
M,2,0001,0002,000B
M,3,0001,000B,000B
M,4,08,
M,4,09,
M,4,0A
M,5,000B,000B,000B
M,4,0B
M,4,0C
I,9,08,00010203,00010203,00000008
I,9,09
I,9,0A
I,10,01,00010203,00010203,0000000A
I,11,01,00010203,00010203,0000000B
I,9,0B
I,9,0C
I,12,03,00010203,00010203,0000000C
I,9,0F
M,4,0D
M,7,0BBB
M,8,00BB
M,4,0E
M,4,0F
Z
# token round B2 -- error, missing measurement M,9,B, and M,9,D should not be here. TODO: currently corrupt the topology
A
M,1
M,2,0001,0002,000B
M,3,0001,000B,000B
M,4,08,
M,4,09,
M,4,0A
M,5,000B,000B,000B
M,4,0B
M,4,0C
M,9,08
M,9,09
M,9,0A
M,10,AAAA,BBBB,CCCC
M,11,AAAA,BBBB,CCCC
M,9,0C
M,9,0D
M,12,AAAA,BBBB,CCCC
M,9,0F
M,4,0D
M,7,0BBB
M,8,00BB
M,4,0E
M,4,0F
Z
# token round C -- the splitter gets unplugged
A
M,1
M,2,0001,0002,000C
M,3,0001,000C,000C
Z
# token round D -- the full tree gets unplugged
A
M,1
Z

